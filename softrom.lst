              ; **********************************************
              ; ************* SoftROM EEPROM tool ************
              ; **********************************************
              ;
              ; Assemble with "The Black Smurf Assembler"
              ; freely available from https://github.com/Edilbert/BSA
              ;
              ; Copyright (c) 2014 Nils Eilers <nils.eilers@gmx.de>
              ; This work is free. You can redistribute it and/or modify it under the
              ; terms of the Do What The Fuck You Want to Public License, Version 2,
              ; as published by Sam Hocevar. See the COPYING file for more details.

              ; ************
              ; * Keycodes *
              ; ************

0009          TAB        =   9     ; Tab
000d          CR         =  13     ; Carriage Return
0013          HOME       =  19     ; Home
0014          DEL        =  20     ; Delete
0093          CLR        = 147     ; Clear
0011          CDOWN      =  17     ; Cursor Down
001d          CRIGHT     =  29     ; Cursor Right
0091          CUP        = 145     ; Cursor Up
009d          CLEFT      = 157     ; Cursor Left

              ; ****************
              ; * Screen codes *
              ; ****************

0000          C8296 = 0

0001 FALSE    #if C8296
SKIP          HOR_BAR    = 102     ; -
SKIP          VER_BAR    =  97     ; |
SKIP          UL         = 104     ; upper left
SKIP          UR         = 106     ; upper right
SKIP          LL         =  98     ; lower left
SKIP          LR         = 100     ; lower right
SKIP          TL         = 101     ; T left
SKIP          TR         = 103     ; T right
SKIP          TU         = 105     ; T upper
SKIP          TB         =  99     ; T bottom
SKIP          
              #else

0040          HOR_BAR    =  64     ; -
005d          VER_BAR    =  93     ; |
0070          UL         = 112     ; upper left
006e          UR         = 110     ; upper right
006d          LL         = 109     ; lower left
007d          LR         = 125     ; lower right
006b          TL         = 107     ; T left
0073          TR         = 115     ; T right
              #endif

0019          ROWS       =  25

              ; ****************************
              ; * Some Zero Page Variables *
              ; ****************************

005e          BP        = $5e      ; Buffer Pointer
0060          STP       = $60      ; String Pointer
0062          SP        = $62      ; SCREEN Pointer
0064          TP        = $64      ; Temporary Pointer
0066          SelPtr    = $66      ; Selection pointer

              ; ************************
              ; * CBM Kernal Variables *
              ; ************************

0096          STATUS    = $96      ; Status byte
009b          STKEY     = $9b      ; Stop key pressed?
00a7          BLNSW     = $a7      ; Blink switch
00a8          BLNCT     = $a8      ; Blink count
00aa          BLNON     = $aa      ; Blink On
00c9          EAL       = $c9      ; used for LOAD, SAVE and TIM
00d1          FNLEN     = $d1      ; Filename length
00d3          SA        = $d3      ; Secondary address
00d4          FA        = $d4      ; First sddress
00da          FNADR     = $da      ; Filename address

0342          DOS_Filename = $0342

              ; *************
              ; * Constants *
              ; *************

8000          Screen = $8000
0014          EntriesPerPage = 20

              ; *****************************************
              ; * Put the buffer after the program code *
              ; *****************************************

0f00          Buffer  = [EOP & $ff00] + $100
0008          PosDiskName =  8
001a          PosDiskID   = 26

              ; ***************************************************
              ; * The CBM 8000 Kernal has no jump table for these *
              ; ***************************************************

b403          READY   = $b403 ; $b3ff ; $b406 omitting prompt
f0d2          TALK    = $f0d2
f0d5          LISTEN  = $f0d5
f143          SECOND  = $f143
f193          TKSA    = $f193
f19e          CIOUT   = $f19e
f1ae          UNTLK   = $f1ae
f1b9          UNLSN   = $f1b9
f1c0          ACPTR   = $f1c0
ffd2          BSOUT   = $ffd2
ffd2          CHROUT  = $ffd2
ffe4          GETIN   = $ffe4

f343          Kernal_STOP = $f343

              ; ***************
              ; * Print Macro *
              ; ***************

              MACRO MAC_Print(lab)
                        LDY #<lab
                        LDA #>lab
                        LDX #?lab
                        JSR PrintText
              ENDMAC

              MACRO MAC_Plot(Row,Col,Char)
                        LDA #Char
                        LDX #Row
                        LDY #Col
                        JSR PlotAt
              ENDMAC

              MACRO MAC_PutString(Row,Col,Text)
                        LDX #Row
                        LDY #Col
                        JSR GotoXY
                        LDX #<Text
                        LDY #>Text
                        JSR PutString
              ENDMAC

              ; ***************************************************
              ; The directory is loaded into RAM beyond the program
              ; SOD = Start of directory
              ; EOD = End   of directory
              ; ***************************************************

              ; **********************************
              ; * BASIC header for program start *
              ; **********************************

0401          START   = $0401

0401          * = START ; *** BASIC ***  CBM / PET series

                        .STORE START,EOP-START,"softrom.prg"

0401 27 04    Link      .WORD EndLink

              ; **********
0403            Linenumber
              ; **********

0403 df 07              .WORD 2015

              ; **********
0405            SysCommand
              ; **********

0405 9e                   .BYTE $9e       ; SYS token
0406 28 31 30 StartML     .BYTE "(1065)"
040c 3a 8f                .BYTE ':',$8f   ; REM token
040e 20 53 4f             .BYTE " SOFTROM EEPROM TOOL 0.2"
0426 00       LineEnd     .BYTE 0
0427 00 00    EndLink     .WORD 0

0429 4c 3d 0a           JMP Main

042c 30 30 30 NUMBER      .BYTE "00000 "
0432 55 4e 49 UnitText    .PET  'unit:',0
0438 44 52 49 DriveText   .PET  'drive:',0
043f 3c 48 3e HelpText    .BYTE "<H> = HELP",0
044a 20 53 4f ProgramText .BYTE " SOFTROM EEPROM TOOL (C) NILS EILERS & BS ",0
0475 52 45 41 Msg_READY   .BYTE "READY.",0
047c 50       Cols        .BYTE 80
047d 00       Count       .BYTE  0
047e 00       CursorRow   .BYTE  0
047f 00       CursorCol   .BYTE  0
0480 00       Entries     .BYTE  0
0481 00       FirstLine   .BYTE  0
0482 14       LastLine    .BYTE 20
0483 00       HelpScreen  .BYTE  0
0484 02       Pages       .BYTE  2
0485 00 00 00 ScreenLo    .FILL 25 (0) ; 25 bytes
049e 00 00 00 ScreenHi    .FILL 25 (0) ; 25 bytes
04b7 00 00 00 EntryLo     .FILL 40 (0) ; 40 bytes
04df 00 00 00 EntryHi     .FILL 40 (0) ; 40 bytes
0507 00       Page        .BYTE  0
0508 00       Offset      .BYTE  0
0509 08       Unit        .BYTE  8
050a 30       Drive       .BYTE  '0'
050b 00       LV0         .BYTE  0
050c 00       LV1         .BYTE  0
050d 00       Reverse     .BYTE  0
050e 02       Select      .BYTE  2
050f 00       FirstFile   .BYTE  0  ; First file on display
0510 00 00    SOD         .WORD  0  ; Start Of Directory
0512 00 00    EOD         .WORD  0  ; End Of Directory
0514 00       TargetLo    .BYTE  $00
0515 90       TargetHi    .BYTE  $90
0516 00       SelectionLo .BYTE  0
0517 00       SelectionHi .BYTE  0
0518 10       SelFilename .BYTE 16

80c9          DiskStatus = $8000 + 201

001e          HelpLen   = 30
0007          HelpLines =  7
0519 55 50 2f HelpWin     .BYTE "UP/DN  MOVE SELECTION BAR    ",0
0537 2b 20 2f             .BYTE "+ / -  CHANGE UNIT OR DRIVE #",0
0555 48 4f 4d             .BYTE "HOME   RESET THE SCREEN      ",0
0573 52 45 54             .BYTE "RETURN FLASH EEPROM FROM FILE",0
0591 53 54 4f             .BYTE "STOP   QUIT THE PROGRAM      ",0
05af 48 20 20             .BYTE "H      SHOW THIS HELP WINDOW ",0
05cd 45 53 43             .BYTE "ESC    CLOSE HELP WINDOW     ",0


              ; ********
05eb            ShowHelp
              ; ********

05eb a9 00              LDA #0
05ed 8d 08 05           STA Offset
05f0 a2 35              LDX #53
05f2 8e 7d 04           STX Count
05f5 a2 08              LDX #8
05f7 a0 18              LDY #24
05f9 20 bd 0a           JSR HorLine
05fc a2 10              LDX #16
05fe a0 18              LDY #24
0600 20 bd 0a           JSR HorLine
0603 a2 10              LDX #16
0605 8e 7d 04           STX Count
0608 a2 08              LDX #8
060a a0 17              LDY #23
060c 20 d8 0a           JSR VerLine
060f a2 08              LDX #8
0611 a0 35              LDY #53
0613 20 d8 0a           JSR VerLine
                        MAC_Plot( 8,23,UL)
0616 a9 70              LDA #UL
0618 a2 08              LDX #8
061a a0 17              LDY #23
061c 20 61 0b           JSR PlotAt

                        MAC_Plot( 8,53,UR)
061f a9 6e              LDA #UR
0621 a2 08              LDX #8
0623 a0 35              LDY #53
0625 20 61 0b           JSR PlotAt

                        MAC_Plot(16,23,LL)
0628 a9 6d              LDA #LL
062a a2 10              LDX #16
062c a0 17              LDY #23
062e 20 61 0b           JSR PlotAt

                        MAC_Plot(16,53,LR)
0631 a9 7d              LDA #LR
0633 a2 10              LDX #16
0635 a0 35              LDY #53
0637 20 61 0b           JSR PlotAt

063a a9 07              LDA #HelpLines
063c 8d 7d 04           STA Count
063f a2 09              LDX #9
0641 a0 18              LDY #24
0643 20 f3 0a           JSR GotoXY
0646 a2 19              LDX #<HelpWin
0648 a0 05              LDY #>HelpWin
064a 20 3a 0b ShHe10    JSR PutString
064d ae 7e 04           LDX CursorRow
0650 e8                 INX
0651 a0 18              LDY #24
0653 20 f3 0a           JSR GotoXY
0656 18                 CLC
0657 a5 60              LDA STP
0659 69 1e              ADC #HelpLen
065b aa                 TAX
065c a5 61              LDA STP+1
065e 69 00              ADC #0
0660 a8                 TAY
0661 ce 7d 04           DEC Count
0664 d0 e4              BNE ShHe10
0666 a9 ff              LDA #$ff
0668 8d 83 04           STA HelpScreen
066b 60                 RTS



              ; ****
066c            STOP
              ; ****
066c a5 9b              LDA STKEY
066e c9 ef              CMP #$ef
0670 60                 RTS

              ; **********
0671            Error_Beep
              ; **********

0671 a9 07              LDA #7
0673 4c d2 ff           JMP BSOUT

              ; *********
0676            PrintText
              ; *********

0676 84 62              STY SP
0678 85 63              STA SP+1
067a a0 00              LDY #0
067c b1 62    PrTe_10   LDA (SP),Y
067e 20 d2 ff           JSR BSOUT
0681 c8                 INY
0682 ca                 DEX
0683 d0 f7              BNE PrTe_10
0685 60                 RTS

              ; ********************
0686            Flush_Keyboard_Queue
              ; ********************

0686 20 e4 ff           JSR GETIN
0689 d0 fb              BNE Flush_Keyboard_Queue
068b 60                 RTS

              ; ***********
068c            FormatByte
              ; ***********

              ; Convert binary number in (A) to
              ; three decimal digits in (Y),(X) and (A)

068c a0 30              LDY #'0'      ; 100
068e a2 2f              LDX #'0'-1    ;  10
0690 38                 SEC
0691 e8       asts_01   INX
0692 e9 0a              SBC #10
0694 b0 fb              BCS asts_01
0696 69 3a              ADC #$3a
0698 e0 3a              CPX #$3a
069a 90 07              BCC asts_rt  ; X < 10
069c 48                 PHA
069d 8a                 TXA
069e e9 0a              SBC #10      ; X -= 10
06a0 aa                 TAX
06a1 68                 PLA
06a2 c8                 INY          ; Y = 1
06a3 60       asts_rt   RTS


              ; **************
06a4            FormatInteger
              ; **************

06a4 a0 2f              LDY #$2f           ; X = low  byte
06a6 38                 SEC                ; A = high byte
06a7 c8       FORINT_01 INY
06a8 8e 0b 05           STX LV0
06ab 8d 0c 05           STA LV1
06ae 8a                 TXA
06af e9 10              SBC #<10000
06b1 aa                 TAX
06b2 ad 0c 05           LDA LV1
06b5 e9 27              SBC #>10000
06b7 b0 ee              BCS FORINT_01
06b9 8c 2c 04           STY NUMBER
06bc ae 0b 05           LDX LV0
06bf ad 0c 05           LDA LV1
06c2 a0 2f              LDY #$2f
06c4 38                 SEC
06c5 c8       FORINT_02 INY
06c6 8e 0b 05           STX LV0
06c9 8d 0c 05           STA LV1
06cc 8a                 TXA
06cd e9 e8              SBC #<1000
06cf aa                 TAX
06d0 ad 0c 05           LDA LV1
06d3 e9 03              SBC #>1000
06d5 b0 ee              BCS FORINT_02
06d7 8c 2d 04           STY NUMBER+1
06da ae 0b 05           LDX LV0
06dd ad 0c 05           LDA LV1
06e0 a0 2f              LDY #$2f
06e2 38                 SEC
06e3 c8       FORINT_03 INY
06e4 8e 0b 05           STX LV0
06e7 8d 0c 05           STA LV1
06ea 8a                 TXA
06eb e9 64              SBC #100
06ed aa                 TAX
06ee ad 0c 05           LDA LV1
06f1 e9 00              SBC #0
06f3 b0 ee              BCS FORINT_03
06f5 8c 2e 04           STY NUMBER+2
06f8 ad 0b 05           LDA LV0
06fb a0 2f              LDY #$2f
06fd 38                 SEC
06fe c8       FORINT_04 INY
06ff e9 0a              SBC #10
0701 b0 fb              BCS FORINT_04
0703 8c 2f 04           STY NUMBER+3
0706 69 3a              ADC #$3a
0708 8d 30 04           STA NUMBER+4
070b a2 00              LDX #0
070d a9 20              LDA #' '
070f bc 2c 04 FORINT_05 LDY NUMBER,X
0712 c0 30              CPY #'0'
0714 d0 08              BNE FORINT_06
0716 9d 2c 04           STA NUMBER,X
0719 e8                 INX
071a e0 04              CPX #4
071c 90 f1              BCC FORINT_05
071e 60       FORINT_06 RTS


              ; ********
071f            ShowUnit
              ; ********

071f a2 00              LDX #0
0721 ac 0e 05           LDY Select
0724 d0 02              BNE ShUn10
0726 a2 80              LDX #$80
0728 8e 0d 05 ShUn10    STX Reverse
072b a2 02              LDX #2
072d a0 06              LDY #6
072f 20 f3 0a           JSR GotoXY
0732 ad 09 05           LDA Unit
0735 20 8c 06           JSR FormatByte
0738 e0 30              CPX #'0'
073a f0 06              BEQ ShUn20
073c 48                 PHA
073d 8a                 TXA
073e 20 17 0b           JSR PutCharR
0741 68                 PLA
0742 20 17 0b ShUn20    JSR PutCharR
0745 a9 20              LDA #' '
0747 4c fa 0a           JMP PutChar

              ; *********
074a            ShowDrive
              ; *********

074a a2 00              LDX #0
074c ac 0e 05           LDY Select
074f 88                 DEY
0750 d0 02              BNE ShDr10
0752 a2 80              LDX #$80
0754 8e 0d 05 ShDr10    STX Reverse
0757 ad 0a 05           LDA Drive
075a a2 02              LDX #2
075c a0 0f              LDY #15
075e 4c 76 0b           JMP PlotAtR


              ; ************
0761            ShowDiskName
              ; ************

0761 a2 02              LDX #2
0763 a0 12              LDY #18
0765 20 f3 0a           JSR GotoXY
0768 a9 20              LDA #' '
076a 8d 18 0f           STA Buffer + PosDiskName + 16 ; delete quote
076d a9 00              LDA #0
076f 8d 1c 0f           STA Buffer + PosDiskName + 20 ; mark string end
0772 a2 08              LDX #<[Buffer + PosDiskName]
0774 a0 0f              LDY #>[Buffer + PosDiskName]
0776 4c 3a 0b           JMP PutString

              ; **************
0779            FormatFilename
              ; **************

0779 a5 5e              LDA BP
077b 85 60              STA STP
077d a5 5f              LDA BP+1
077f 85 61              STA STP+1
0781 a0 02              LDY #2
0783 b1 5e              LDA (BP),Y      ; Blocks low
0785 aa                 TAX
0786 c8                 INY
0787 b1 5e              LDA (BP),Y      ; Blocks high
0789 20 a4 06           JSR FormatInteger
078c a0 00              LDY #0
078e b9 2e 04 FoFi10    LDA NUMBER+2,Y
0791 91 5e              STA (BP),Y
0793 c8                 INY
0794 c0 04              CPY #4
0796 90 f6              BCC FoFi10
0798 b1 5e              LDA (BP),Y
079a c9 20              CMP #' '
079c d0 1c              BNE FoFi99
079e e6 60    FoFi20    INC STP
07a0 b1 60              LDA (STP),Y
07a2 c9 20              CMP #' '
07a4 f0 f8              BEQ FoFi20
07a6 c9 22              CMP #$22
07a8 f0 f4              BEQ FoFi20
07aa 91 5e              STA (BP),Y
07ac c8       FoFi40    INY
07ad c0 20              CPY #$20
07af b0 09              BCS FoFi99
07b1 b1 60    FoFi50    LDA (STP),Y
07b3 91 5e              STA (BP),Y
07b5 d0 f5              BNE FoFi40
07b7 ee 80 04           INC Entries
07ba 60       FoFi99    RTS


              ; *************
07bb            FormatEntries
              ; *************

07bb a9 00              LDA #0
07bd 8d 80 04           STA Entries
07c0 a9 20              LDA #$20        ; 1st. file
07c2 85 5e              STA BP
07c4 a9 0f              LDA #>Buffer
07c6 85 5f              STA BP+1
07c8 a0 04    FoEn10    LDY #4          ; after link and #
07ca b1 5e              LDA (BP),Y
07cc c9 20              CMP #' '        ; for filename must be blank
07ce d0 24              BNE FoEn99
07d0 20 79 07           JSR FormatFilename
07d3 20 ff 0c           JSR GetLoadAddress
07d6 ae 80 04           LDX Entries
07d9 ca                 DEX
07da 20 0b 08           JSR ShowEntry
07dd 18                 CLC
07de a5 5e              LDA BP
07e0 69 20              ADC #$20
07e2 85 5e              STA BP
07e4 90 02              BCC FoEn20
07e6 e6 5f              INC BP+1
07e8 ad 12 05 FoEn20    LDA EOD         ; check for End Of Directory
07eb c5 5e              CMP BP
07ed ad 13 05           LDA EOD+1
07f0 e5 5f              SBC BP+1
07f2 b0 d4              BCS FoEn10
07f4 60       FoEn99    RTS


              ; *******
07f5            PET2SCR
              ; *******

07f5 c9 41              CMP #$41
07f7 90 11              BCC P2C99
07f9 c9 5b              CMP #$5b
07fb b0 03              BCS P2C10
07fd 29 1f              AND #$1f    ; a - z
07ff 60                 RTS
0800 c9 c1    P2C10     CMP #$c1
0802 90 06              BCC P2C99
0804 c9 ca              CMP #$ca
0806 b0 02              BCS P2C99
0808 29 7f              AND #$7f    ; A - Z
080a 60       P2C99     RTS

              ; *********
080b            ShowEntry
              ; *********

              ; Input: (X)  = entry # (unchanged)
              ;        (BP) = buffer pointer
              ; Used:  (A),(Y)

080b ec 82 04           CPX LastLine
080e b0 47              BCS ShEn99
0810 a0 00              LDY #0              ; no reverse
0812 8a                 TXA                 ; entry # in (X)
0813 18                 CLC
0814 69 02              ADC #2
0816 cd 0e 05           CMP Select
0819 d0 16              BNE ShEn10
081b bd b7 04           LDA EntryLo,X
081e 8d 16 05           STA SelectionLo
0821 bd df 04           LDA EntryHi,X
0824 8d 17 05           STA SelectionHi
0827 a5 5e              LDA BP
0829 85 66              STA SelPtr
082b a5 5f              LDA BP+1
082d 85 67              STA SelPtr+1
082f a0 80              LDY #$80            ; selected
0831 8c 0d 05 ShEn10    STY Reverse
0834 bd b7 04           LDA EntryLo,X
0837 85 62              STA SP
0839 bd df 04           LDA EntryHi,X
083c 85 63              STA SP+1
083e a0 00              LDY #0
0840 b1 5e    ShEn20    LDA (BP),Y
0842 f0 13              BEQ ShEn99
0844 c9 22              CMP #$22            ; hide quote
0846 d0 02              BNE ShEn30
0848 a9 20              LDA #' '
084a 20 f5 07 ShEn30    JSR PET2SCR
084d 0d 0d 05           ORA Reverse
0850 91 62              STA (SP),Y
0852 c8                 INY
0853 c0 20              CPY #32
0855 90 e9              BCC ShEn20
0857 60       ShEn99    RTS


              ; ***********
0858            ShowEntries
              ; ***********

0858 ad 10 05           LDA SOD
085b 85 5e              STA BP
085d ad 11 05           LDA SOD+1
0860 85 5f              STA BP+1
0862 a2 00              LDX #0
0864 20 0b 08 ShoE10    JSR ShowEntry
0867 18                 CLC
0868 a5 5e              LDA BP
086a 69 20              ADC #$20
086c 85 5e              STA BP
086e 90 02              BCC ShoE20
0870 e6 5f              INC BP+1
0872 e8       ShoE20    INX
0873 ec 82 04           CPX LastLine
0876 b0 09              BCS ShoE99
0878 8a                 TXA
0879 6d 81 04           ADC FirstLine  ; Carry is clear
087c cd 80 04           CMP Entries
087f 90 e3              BCC ShoE10
0881 60       ShoE99    RTS


              ; ***********
0882            RightSelect
              ; ***********

0882 ad 0e 05           LDA Select
0885 f0 23              BEQ IncSelect  ; Unit -> Drive
0887 c9 02              CMP #2
0889 90 0d              BCC RiSe99     ; Drive
088b 18                 CLC
088c 69 12              ADC #18
088e cd 80 04           CMP Entries
0891 b0 05              BCS RiSe99
0893 69 02              ADC #2
0895 8d 0e 05           STA Select
0898 60       RiSe99    RTS



              ; **********
0899            LeftSelect
              ; **********

0899 ad 0e 05           LDA Select
089c c9 01              CMP #1
089e f0 42              BEQ DecSelect  ; Unit <- Drive
08a0 c9 17              CMP #23
08a2 90 05              BCC LeSe99
08a4 e9 14              SBC #20
08a6 8d 0e 05           STA Select
08a9 60       LeSe99    RTS


              ; *********
08aa            IncSelect
              ; *********

              ; Increment selection
              ;    0 : unit
              ;    1 : drive
              ;  > 1 : filename

08aa ae 0e 05           LDX Select
08ad f0 2f              BEQ InSe40          ; Unit
08af ca                 DEX
08b0 f0 2c              BEQ InSe40          ; Drive
08b2 ec 82 04           CPX LastLine
08b5 90 1d              BCC InSe20
08b7 18                 CLC                 ; Scroll display
08b8 ad 81 04           LDA FirstLine
08bb 6d 82 04           ADC LastLine
08be cd 80 04           CMP Entries
08c1 b0 16              BCS InSe30          ; At end alreay
08c3 ee 81 04           INC FirstLine
08c6 ad 10 05           LDA SOD             ; Advance SOD
08c9 69 20              ADC #$20
08cb 8d 10 05           STA SOD
08ce 90 03              BCC InSe10
08d0 ee 11 05           INC SOD+1
08d3 60       InSe10    RTS
08d4 ec 80 04 InSe20    CPX Entries
08d7 90 05              BCC InSe40          ; in range
08d9 a2 01    InSe30    LDX #1
08db 8e 0e 05           STX Select          ; wrap around
08de ee 0e 05 InSe40    INC Select
08e1 60       InSe99    RTS



              ; *********
08e2            DecSelect
              ; *********

              ; Decrement selection
              ;    0 : unit
              ;    1 : drive
              ;  > 1 : filename

08e2 ae 0e 05           LDX Select
08e5 e0 02              CPX #2              ; First file
08e7 d0 17              BNE DeSe20
08e9 ad 81 04           LDA FirstLine       ; Scroll display
08ec f0 12              BEQ DeSe20
08ee ce 81 04           DEC FirstLine
08f1 38                 SEC
08f2 ad 10 05           LDA SOD
08f5 e9 20              SBC #$20
08f7 8d 10 05           STA SOD
08fa b0 03              BCS DeSe10
08fc ce 11 05           DEC SOD+1
08ff 60       DeSe10    RTS
0900 ce 0e 05 DeSe20    DEC Select
0903 10 0f              BPL DeSe99
0905 ae 80 04           LDX Entries
0908 ec 82 04           CPX LastLine
090b 90 03              BCC DeSe30
090d ae 82 04           LDX LastLine
0910 e8       DeSe30    INX
0911 8e 0e 05           STX Select          ; wrap around
0914 60       DeSe99    RTS


              ; *************
0915            ShowSelection
              ; *************

0915 20 1f 07           JSR ShowUnit
0918 20 4a 07           JSR ShowDrive
091b 4c 58 08           JMP ShowEntries


              ; ********
091e            IncValue
              ; ********

091e ae 0e 05           LDX Select
0921 d0 0c              BNE InVa10
0923 ad 09 05           LDA Unit
0926 c9 0b              CMP #11
0928 b0 15              BCS InVa99
092a ee 09 05           INC Unit
092d d0 0d              BNE InVa20
092f ca       InVa10    DEX
0930 d0 0d              BNE InVa99
0932 ad 0a 05           LDA Drive
0935 c9 39              CMP #'9'
0937 b0 06              BCS InVa99
0939 ee 0a 05           INC Drive
093c 20 0c 0a InVa20    JSR Reload
093f 60       InVa99    RTS

              ; ********
0940            DecValue
              ; ********

0940 ae 0e 05           LDX Select
0943 d0 0c              BNE DeVa10
0945 ad 09 05           LDA Unit
0948 c9 09              CMP #9
094a 90 15              BCC DeVa99
094c ce 09 05           DEC Unit
094f d0 0d              BNE DeVa20
0951 ca       DeVa10    DEX
0952 d0 0d              BNE DeVa99
0954 ad 0a 05           LDA Drive
0957 c9 31              CMP #'1'
0959 90 06              BCC DeVa99
095b ce 0a 05           DEC Drive
095e 20 0c 0a DeVa20    JSR Reload
0961 60       DeVa99    RTS


              ; **********
0962            HomeSelect
              ; **********

0962 a9 00              LDA #0
0964 8d 0e 05           STA Select
0967 8d 81 04           STA FirstLine
096a a9 20              LDA #$20
096c 8d 10 05           STA SOD
096f a9 0f              LDA #>Buffer
0971 8d 11 05           STA SOD+1
0974 60                 RTS

              ; ********
0975            MainLoop
              ; ********

0975 20 e4 ff           JSR GETIN
0978 f0 fb              BEQ MainLoop
097a 2c 83 04           BIT HelpScreen
097d 10 05              BPL MaLo02
097f 48                 PHA
0980 20 ea 09           JSR Repaint
0983 68                 PLA
0984 c9 03    MaLo02    CMP #3          ; STOP key
0986 f0 61              BEQ MaLo99
0988 c9 09              CMP #TAB
098a f0 54              BEQ MaLo85
098c c9 11              CMP #CDOWN
098e f0 50              BEQ MaLo85
0990 c9 91    MaLo05    CMP #CUP
0992 d0 06              BNE MaLo10
0994 20 e2 08           JSR DecSelect
0997 4c e3 09           JMP MaLo90
099a c9 1d    MaLo10    CMP #CRIGHT
099c d0 06              BNE MaLo15
099e 20 82 08           JSR RightSelect
09a1 4c e3 09           JMP MaLo90
09a4 c9 9d    MaLo15    CMP #CLEFT
09a6 d0 06              BNE MaLo20
09a8 20 99 08           JSR LeftSelect
09ab 4c e3 09           JMP MaLo90
09ae c9 2b    MaLo20    CMP #'+'
09b0 d0 06              BNE MaLo25
09b2 20 1e 09           JSR IncValue
09b5 4c e3 09           JMP MaLo90
09b8 c9 2d    MaLo25    CMP #'-'
09ba d0 06              BNE MaLo30
09bc 20 40 09           JSR DecValue
09bf 4c e3 09           JMP MaLo90
09c2 c9 13    MaLo30    CMP #HOME
09c4 d0 06              BNE MaLo35
09c6 20 62 09           JSR HomeSelect
09c9 4c e3 09           JMP MaLo90
09cc c9 48    MaLo35    CMP #'H'
09ce d0 06              BNE MaLo40
09d0 20 eb 05           JSR ShowHelp
09d3 4c 75 09           JMP MainLoop
09d6 c9 0d    MaLo40    CMP #13
09d8 d0 03              BNE MaLo45
09da 4c fb 0d           JMP Flash
09dd 4c 75 09 MaLo45    JMP MainLoop
09e0 20 aa 08 MaLo85    JSR IncSelect
09e3 20 15 09 MaLo90    JSR ShowSelection
09e6 4c 75 09           JMP MainLoop
09e9 60       MaLo99    RTS


              ; *******
09ea            Repaint
              ; *******

09ea a9 00              LDA #0
09ec 8d 83 04           STA HelpScreen
09ef 20 f2 0b           JSR PaintMask
09f2 20 1f 07           JSR ShowUnit
09f5 20 4a 07           JSR ShowDrive
09f8 20 61 07           JSR ShowDiskName
09fb ad 80 04           LDA Entries
09fe f0 0b              BEQ Repa10
0a00 a9 02              LDA #2
0a02 8d 0e 05           STA Select
0a05 20 58 08           JSR ShowEntries
0a08 20 1f 07           JSR ShowUnit
0a0b 60       Repa10    RTS


              ; ******
0a0c            Reload
              ; ******

0a0c a9 00              LDA #0
0a0e 8d 80 04           STA Entries
0a11 20 8d 0c           JSR LoadDirectory
0a14 20 bb 07           JSR FormatEntries
0a17 20 ea 09           JSR Repaint
0a1a 60                 RTS


              ; ****
0a1b            Init
              ; ****

0a1b a9 08              LDA #8
0a1d 8d 09 05           STA Unit
0a20 a9 30              LDA #'0'
0a22 8d 0a 05           STA Drive
0a25 a9 00              LDA #0
0a27 8d 7e 04           STA CursorRow
0a2a 8d 7f 04           STA CursorCol
0a2d 8d 80 04           STA Entries
0a30 8d 08 05           STA Offset
0a33 8d 0d 05           STA Reverse
0a36 8d 0e 05           STA Select
0a39 8d 81 04           STA FirstLine
0a3c 60                 RTS

              ; ****
0a3d            Main
              ; ****

0a3d 20 5f 0a           JSR Detect_BASIC_version
0a40 20 60 0a           JSR Detect_Screen_Width
0a43 20 70 0a           JSR SetupScreen
0a46 20 ea 09           JSR Repaint
0a49 20 97 0a           JSR SetupEntries
0a4c 20 1b 0a           JSR Init
0a4f 20 0c 0a           JSR Reload
0a52 20 75 09           JSR MainLoop
0a55 20 86 06           JSR Flush_Keyboard_Queue
0a58 a9 75              LDA #<Msg_READY
0a5a a0 04              LDY #>Msg_READY
0a5c 4c 03 b4           JMP READY



              ; ********************
0a5f            Detect_BASIC_version
              ; ********************
              ; TODO: detect BASIC version and patch vectors
0a5f 60                 RTS

              ; *******************
0a60            Detect_Screen_Width
              ; *******************
              ; TODO: detect Screen Width
0a60 a9 50              LDA #80
0a62 8d 7c 04           STA Cols
0a65 a9 02              LDA #2
0a67 8d 84 04           STA Pages
0a6a a9 28              LDA #40
0a6c 8d 82 04           STA LastLine
0a6f 60                 RTS


              ; ***********
0a70            SetupScreen
              ; ***********

0a70 a9 93              LDA #CLR
0a72 20 d2 ff           JSR CHROUT          ; clear screen
0a75 a9 82              LDA #130
0a77 20 d2 ff           JSR CHROUT          ; legacy character set
0a7a a9 00              LDA #<Screen
0a7c a2 80              LDX #>Screen
0a7e a0 00              LDY #0
0a80 99 85 04 SeSe10    STA ScreenLo,Y
0a83 8a                 TXA
0a84 99 9e 04           STA ScreenHi,Y
0a87 18                 CLC
0a88 b9 85 04           LDA ScreenLo,Y
0a8b 6d 7c 04           ADC Cols
0a8e 90 01              BCC SeSe20
0a90 e8                 INX
0a91 c8       SeSe20    INY
0a92 c0 19              CPY #ROWS
0a94 90 ea              BCC SeSe10
0a96 60                 RTS


              ; ************
0a97            SetupEntries
              ; ************

0a97 a0 00              LDY #0
0a99 b9 89 04 SeEn10    LDA ScreenLo+4,Y
0a9c be a2 04           LDX ScreenHi+4,Y
0a9f 09 01              ORA #1
0aa1 99 b7 04           STA EntryLo,Y
0aa4 48                 PHA
0aa5 8a                 TXA
0aa6 99 df 04           STA EntryHi,Y
0aa9 68                 PLA
0aaa 18                 CLC
0aab 69 28              ADC #40
0aad 99 cb 04           STA EntryLo+EntriesPerPage,Y
0ab0 90 01              BCC SeEn20
0ab2 e8                 INX
0ab3 8a       SeEn20    TXA
0ab4 99 f3 04           STA EntryHi+EntriesPerPage,Y
0ab7 c8                 INY
0ab8 c0 14              CPY #EntriesPerPage
0aba 90 dd              BCC SeEn10
0abc 60                 RTS


              ; ********
0abd            HorLine
              ; ********

              ; Draw a horizontal line
              ; (X)   = Row
              ; (Y)   = Start column
              ; Count = Last  column + 1

0abd 18                CLC
0abe bd 85 04          LDA ScreenLo,X
0ac1 6d 08 05          ADC Offset
0ac4 85 62             STA SP
0ac6 bd 9e 04          LDA ScreenHi,X
0ac9 69 00             ADC #0
0acb 85 63             STA SP+1
0acd a9 40             LDA #HOR_BAR
0acf 91 62    HoLi10   STA (SP),Y
0ad1 c8                INY
0ad2 cc 7d 04          CPY Count
0ad5 90 f8             BCC HoLi10
0ad7 60                RTS

              ; ********
0ad8            VerLine
              ; ********

              ; Draw a vertical line
              ; (Y)   = Column
              ; (X)   = Start row
              ; Count = Last  row + 1

0ad8 18                CLC
0ad9 98                TYA
0ada 6d 08 05          ADC Offset
0add a8                TAY
0ade bd 85 04 VeLi10   LDA ScreenLo,X
0ae1 85 62             STA SP
0ae3 bd 9e 04          LDA ScreenHi,X
0ae6 85 63             STA SP+1
0ae8 a9 5d             LDA #VER_BAR
0aea 91 62             STA (SP),Y
0aec e8                INX
0aed ec 7d 04          CPX Count
0af0 90 ec             BCC VeLi10
0af2 60                RTS


              ; ******
0af3            GotoXY
              ; ******

0af3 8e 7e 04           STX CursorRow
0af6 8c 7f 04           STY CursorCol
0af9 60                 RTS

              ; *******
0afa            PutChar
              ; *******

0afa 48                 PHA                ; A = Char
0afb ae 7e 04           LDX CursorRow
0afe 18                 CLC
0aff bd 85 04           LDA ScreenLo,X
0b02 6d 7f 04           ADC CursorCol
0b05 85 62              STA SP
0b07 bd 9e 04           LDA ScreenHi,X
0b0a 69 00              ADC #0
0b0c 85 63              STA SP+1
0b0e 68                 PLA
0b0f a0 00              LDY #0
0b11 91 62              STA (SP),Y
0b13 ee 7f 04           INC CursorCol
0b16 60                 RTS


              ; ********
0b17            PutCharR
              ; ********

0b17 48                 PHA                ; A = Char
0b18 ae 7e 04           LDX CursorRow
0b1b 18                 CLC
0b1c bd 85 04           LDA ScreenLo,X
0b1f 6d 7f 04           ADC CursorCol
0b22 85 62              STA SP
0b24 bd 9e 04           LDA ScreenHi,X
0b27 69 00              ADC #0
0b29 85 63              STA SP+1
0b2b 68                 PLA
0b2c a0 00              LDY #0
0b2e 20 f5 07           JSR PET2SCR
0b31 0d 0d 05           ORA Reverse
0b34 91 62              STA (SP),Y
0b36 ee 7f 04           INC CursorCol
0b39 60                 RTS


              ; *********
0b3a            PutString
              ; *********

0b3a 86 60              STX STP
0b3c 84 61              STY STP+1
0b3e a0 00              LDY #0
0b40 b1 60              LDA (STP),Y
0b42 f0 1c              BEQ PuSt99
0b44 20 f5 07           JSR PET2SCR
0b47 20 17 0b           JSR PutCharR
0b4a c8       PuSt10    INY
0b4b c0 50              CPY #80
0b4d b0 11              BCS PuSt99      ; safety exit
0b4f b1 60              LDA (STP),Y
0b51 f0 0d              BEQ PuSt99
0b53 20 f5 07           JSR PET2SCR
0b56 0d 0d 05           ORA Reverse
0b59 91 62              STA (SP),Y
0b5b ee 7f 04           INC CursorCol
0b5e d0 ea              BNE PuSt10
0b60 60       PuSt99    RTS

              ; ******
0b61            PlotAt
              ; ******

0b61 48                PHA              ; X = Row
0b62 18                CLC              ; Y = Col
0b63 98                TYA              ; A = Char
0b64 6d 08 05          ADC Offset
0b67 a8                TAY
0b68 bd 85 04          LDA ScreenLo,X
0b6b 85 62             STA SP
0b6d bd 9e 04          LDA ScreenHi,X
0b70 85 63             STA SP+1
0b72 68                PLA
0b73 91 62             STA (SP),Y
0b75 60                RTS

              ; *******
0b76            PlotAtR
              ; *******

0b76 48                PHA              ; X = Row
0b77 18                CLC              ; Y = Col
0b78 98                TYA              ; A = Char
0b79 6d 08 05          ADC Offset
0b7c a8                TAY
0b7d bd 85 04          LDA ScreenLo,X
0b80 85 62             STA SP
0b82 bd 9e 04          LDA ScreenHi,X
0b85 85 63             STA SP+1
0b87 68                PLA
0b88 0d 0d 05          ORA Reverse
0b8b 91 62             STA (SP),Y
0b8d 60                RTS

              ; *********
0b8e            PaintPage
              ; *********

0b8e a2 27              LDX #39
0b90 8e 7d 04           STX Count
0b93 a2 01              LDX #1
0b95 a0 01              LDY #1
0b97 20 bd 0a           JSR HorLine
0b9a a2 03              LDX #3
0b9c a0 01              LDY #1
0b9e 20 bd 0a           JSR HorLine
0ba1 a2 18              LDX #24
0ba3 a0 01              LDY #1
0ba5 20 bd 0a           JSR HorLine
0ba8 a2 18              LDX #24
0baa 8e 7d 04           STX Count
0bad a2 01              LDX #1
0baf a0 00              LDY #0
0bb1 20 d8 0a           JSR VerLine
0bb4 a2 01              LDX #1
0bb6 a0 27              LDY #39
0bb8 20 d8 0a           JSR VerLine
                        MAC_Plot( 1, 0,UL)
0bbb a9 70              LDA #UL
0bbd a2 01              LDX #1
0bbf a0 00              LDY #0
0bc1 20 61 0b           JSR PlotAt

                        MAC_Plot( 1,39,UR)
0bc4 a9 6e              LDA #UR
0bc6 a2 01              LDX #1
0bc8 a0 27              LDY #39
0bca 20 61 0b           JSR PlotAt

                        MAC_Plot(24, 0,LL)
0bcd a9 6d              LDA #LL
0bcf a2 18              LDX #24
0bd1 a0 00              LDY #0
0bd3 20 61 0b           JSR PlotAt

                        MAC_Plot(24,39,LR)
0bd6 a9 7d              LDA #LR
0bd8 a2 18              LDX #24
0bda a0 27              LDY #39
0bdc 20 61 0b           JSR PlotAt

                        MAC_Plot( 3, 0,TL)
0bdf a9 6b              LDA #TL
0be1 a2 03              LDX #3
0be3 a0 00              LDY #0
0be5 20 61 0b           JSR PlotAt

                        MAC_Plot( 3,39,TR)
0be8 a9 73              LDA #TR
0bea a2 03              LDX #3
0bec a0 27              LDY #39
0bee 20 61 0b           JSR PlotAt

0bf1 60                 RTS

              ; *********
0bf2            PaintMask
              ; *********

0bf2 a9 8e              LDA #142         ; Screen Mode
0bf4 20 d2 ff           JSR BSOUT
0bf7 a9 93              LDA #CLR
0bf9 20 d2 ff           JSR BSOUT        ; clear screen
0bfc 20 d2 ff           JSR BSOUT        ; amd remove window settings
0bff a9 0e              LDA #14
0c01 8d 4c e8           STA $e84c        ; text char set
0c04 ad 84 04           LDA Pages
0c07 8d 07 05           STA Page
0c0a a9 00              LDA #0
0c0c 8d 08 05           STA Offset
0c0f 20 8e 0b PaMa10    JSR PaintPage
0c12 18                 CLC
0c13 ad 08 05           LDA Offset
0c16 69 28              ADC #40
0c18 8d 08 05           STA Offset
0c1b ce 07 05           DEC Page
0c1e d0 ef              BNE PaMa10
0c20 a9 00              LDA #0
0c22 8d 08 05           STA Offset
                        MAC_PutString(2,1,UnitText)
0c25 a2 02              LDX #2
0c27 a0 01              LDY #1
0c29 20 f3 0a           JSR GotoXY
0c2c a2 32              LDX #<UnitText
0c2e a0 04              LDY #>UnitText
0c30 20 3a 0b           JSR PutString

                        MAC_PutString(2,9,DriveText)
0c33 a2 02              LDX #2
0c35 a0 09              LDY #9
0c37 20 f3 0a           JSR GotoXY
0c3a a2 38              LDX #<DriveText
0c3c a0 04              LDY #>DriveText
0c3e 20 3a 0b           JSR PutString

0c41 a9 80              LDA #$80
0c43 8d 0d 05           STA Reverse
                        MAC_PutString(0,19,ProgramText)
0c46 a2 00              LDX #0
0c48 a0 13              LDY #19
0c4a 20 f3 0a           JSR GotoXY
0c4d a2 4a              LDX #<ProgramText
0c4f a0 04              LDY #>ProgramText
0c51 20 3a 0b           JSR PutString

0c54 a9 00              LDA #0
0c56 8d 0d 05           STA Reverse
                        MAC_PutString(0,69,HelpText)
0c59 a2 00              LDX #0
0c5b a0 45              LDY #69
0c5d 20 f3 0a           JSR GotoXY
0c60 a2 3f              LDX #<HelpText
0c62 a0 04              LDY #>HelpText
0c64 20 3a 0b           JSR PutString

0c67 60                 RTS



              ; *************
0c68            GetDiskStatus
              ; *************

0c68 ad 09 05           LDA Unit
0c6b 85 d4              STA FA
0c6d 20 d2 f0           JSR TALK
0c70 a9 6f              LDA #$6f
0c72 20 93 f1           JSR TKSA
0c75 a0 00              LDY #0
0c77 20 c0 f1 gss_10    JSR ACPTR
0c7a c9 20              CMP #' '
0c7c 90 0b              BCC gss_20
0c7e 20 f5 07           JSR PET2SCR
0c81 99 c9 80           STA DiskStatus,Y
0c84 c8                 INY
0c85 c0 28              CPY #40
0c87 90 ee              BCC gss_10
0c89 20 ae f1 gss_20    JSR UNTLK
0c8c 60                 RTS


              ; *************
0c8d            LoadDirectory
              ; *************

0c8d a9 00              LDA #<Buffer        ; Initialize buffer pointer BP
0c8f 85 5e              STA BP              ; and End Of Directory EOD
0c91 8d 12 05           STA EOD
0c94 a9 20              LDA #$20
0c96 8d 10 05           STA SOD
0c99 a9 0f              LDA #>Buffer
0c9b 85 5f              STA BP+1
0c9d 8d 13 05           STA EOD+1
0ca0 8d 11 05           STA SOD+1
0ca3 a0 00              LDY #0
0ca5 98                 TYA
0ca6 99 00 0f LoDi05    STA Buffer,Y
0ca9 c8                 INY
0caa d0 fa              BNE LoDi05
0cac ad 09 05           LDA Unit            ; Send LOAD "$n" to Unit
0caf 85 d4              STA FA
0cb1 20 d5 f0           JSR LISTEN
0cb4 a9 f0              LDA #$f0
0cb6 20 43 f1           JSR SECOND
0cb9 a9 24              LDA #'$'
0cbb 20 9e f1           JSR CIOUT
0cbe ad 0a 05           LDA Drive
0cc1 20 9e f1           JSR CIOUT
0cc4 20 b9 f1           JSR UNLSN
0cc7 20 68 0c           JSR GetDiskStatus
0cca ad c9 80           LDA DiskStatus
0ccd c9 30              CMP #'0'
0ccf d0 2b              BNE LoDi99
0cd1 20 d2 f0           JSR TALK
0cd4 a9 60              LDA #$60
0cd6 20 93 f1           JSR TKSA
0cd9 a9 bd              LDA #$bd
0cdb 25 96              AND STATUS
0cdd 85 96              STA STATUS
0cdf a0 00              LDY #0
0ce1 20 c0 f1 LoDi10    JSR ACPTR
0ce4 91 5e              STA (BP),Y
0ce6 24 96              BIT STATUS
0ce8 70 07              BVS LoDi20
0cea c8                 INY
0ceb d0 f4              BNE LoDi10
0ced e6 5f              INC BP+1
0cef 10 f0              BPL LoDi10
0cf1 20 ae f1 LoDi20    JSR UNTLK
0cf4 8c 12 05           STY EOD
0cf7 a5 5f              LDA BP+1
0cf9 8d 13 05           STA EOD+1
0cfc 4c b1 0d LoDi99    JMP Close_Disk_File

              ; **************
0cff            GetLoadAddress
              ; **************

0cff a0 1e              LDY #$1e
0d01 a9 00              LDA #0
0d03 91 5e              STA (BP),Y          ; new end of string
0d05 a0 16              LDY #$16            ; position of file type
0d07 b1 5e              LDA (BP),Y
0d09 c9 50              CMP #'P'            ; PRG files only
0d0b d0 50              BNE GLA99
0d0d ad 09 05           LDA Unit            ; send LOAD "Filename" to Unit
0d10 85 d4              STA FA
0d12 20 d5 f0           JSR LISTEN
0d15 a9 f0              LDA #$f0
0d17 20 43 f1           JSR SECOND
0d1a a0 04              LDY #4              ; start of ilename
0d1c b1 5e    GLA10     LDA (BP),Y
0d1e c9 22              CMP #$22            ; quote marks end of filename
0d20 f0 08              BEQ GLA20
0d22 20 9e f1           JSR CIOUT
0d25 c8                 INY
0d26 c0 14              CPY #20
0d28 90 f2              BCC GLA10
0d2a 20 b9 f1 GLA20     JSR UNLSN
0d2d 20 68 0c           JSR GetDiskStatus
0d30 ad c9 80           LDA DiskStatus
0d33 c9 30              CMP #'0'
0d35 d0 26              BNE GLA99
0d37 20 d2 f0           JSR TALK
0d3a a9 60              LDA #$60
0d3c 20 93 f1           JSR TKSA
0d3f 20 c0 f1           JSR ACPTR
0d42 20 60 0d           JSR ASCII_Hex
0d45 a0 1d              LDY #$1d             ; load address low
0d47 91 5e              STA (BP),Y
0d49 88                 DEY
0d4a 8a                 TXA
0d4b 91 5e              STA (BP),Y
0d4d 20 c0 f1           JSR ACPTR
0d50 20 60 0d           JSR ASCII_Hex
0d53 88                 DEY                  ; load address high
0d54 91 5e              STA (BP),Y
0d56 88                 DEY
0d57 8a                 TXA
0d58 91 5e              STA (BP),Y
0d5a 20 ae f1           JSR UNTLK
0d5d 4c b1 0d GLA99     JMP Close_Disk_File

              ; **********
0d60            ASCII_Hex
              ; **********

              ; Input:  (A)
              ; Output: (X) = High nibble (A) = Low nibble
0d60 48                PHA
0d61 4a                LSR A
0d62 4a                LSR A
0d63 4a                LSR A
0d64 4a                LSR A
0d65 09 30             ORA #'0'
0d67 c9 3a             CMP #$3a
0d69 90 02             BCC Hex_11
0d6b 69 06             ADC #6
0d6d aa       Hex_11   TAX
0d6e 68                PLA
0d6f 29 0f             AND #15
0d71 09 30             ORA #'0'
0d73 c9 3a             CMP #$3a
0d75 90 02             BCC Hex_12
0d77 69 06             ADC #6
0d79 60       Hex_12   RTS

              ; *********
0d7a            Load_File
              ; *********

0d7a 20 bc 0d           JSR Send_Filename
0d7d 20 d2 f0           JSR TALK            ; send primary address
0d80 a9 60              LDA #$60
0d82 20 93 f1           JSR TKSA            ; send secondary address
0d85 20 c0 f1           JSR ACPTR           ; read first byte
0d88 a8                 TAY                 ; flash start address
0d89 a5 96              LDA STATUS          ; check time out bit
0d8b f0 00              BEQ LoFi_22         ; no time out -> continue
              ;         JMP Display_File_Not_Found
0d8d 20 c0 f1 LoFi_22   JSR ACPTR
0d90 85 ca              STA EAL+1           ; flash start address
0d92 a9 00              LDA #0
0d94 85 c9              STA EAL
0d96 85 96              STA STATUS
0d98 20 c0 f1 LoFi_30   JSR ACPTR           ; read next byte
0d9b 91 c9              STA (EAL),Y         ; store byte
0d9d b1 c9    LoFi_40   LDA (EAL),Y         ; this comparison is false for an
0d9f d1 c9              CMP (EAL),Y         ; unfinished write cycle to EEPROM
0da1 d0 fa              BNE LoFi_40
0da3 c8                 INY                 ; increment write address
0da4 d0 02              BNE LoFi_60
0da6 e6 ca              INC EAL+1
0da8 a5 96    LoFi_60   LDA STATUS          ; Get EOF marker in bit 6
0daa f0 ec              BEQ LoFi_30         ; repeat until EOF or ERROR
0dac 84 c9              STY EAL             ; store end address+1 in EAL
0dae 20 ae f1           JSR UNTLK

              ; ***************
0db1            Close_Disk_File
              ; ***************

0db1 20 d5 f0           JSR LISTEN
0db4 a9 e0              LDA #$e0
0db6 20 43 f1           JSR SECOND
0db9 4c b9 f1           JMP UNLSN

              ; *************
0dbc            Send_Filename
              ; *************

0dbc 20 d5 f0           JSR LISTEN
0dbf a9 f0              LDA #$f0
0dc1 20 43 f1           JSR SECOND
0dc4 a0 00              LDY #0
0dc6 b1 da    SeFi_10   LDA (FNADR),Y
0dc8 20 9e f1           JSR CIOUT
0dcb c8                 INY
0dcc c4 d1              CPY FNLEN
0dce 90 f6              BCC SeFi_10
0dd0 4c b9 f1 SeFi_20   JMP UNLSN

              ; **************
0dd3            Setup_Filename
              ; **************

0dd3 18                 CLC
0dd4 a5 66              LDA SelPtr
0dd6 69 04              ADC #4
0dd8 85 64              STA TP
0dda a5 67              LDA SelPtr+1
0ddc 69 00              ADC #0
0dde 85 65              STA TP+1
0de0 a0 00              LDY #0
0de2 b1 64    SpFi_10   LDA (TP),Y
0de4 c9 22              CMP #$22
0de6 f0 08              BEQ SpFi_20
0de8 99 42 03           STA DOS_Filename,Y
0deb c8                 INY
0dec c0 10              CPY #16
0dee 90 f2              BCC SpFi_10
0df0 84 d1    SpFi_20   STY FNLEN
0df2 a9 42              LDA #<DOS_Filename
0df4 85 da              STA FNADR
0df6 a9 03              LDA #>DOS_Filename
0df8 85 db              STA FNADR+1
0dfa 60                 RTS


              ; *****
0dfb            Flash
              ; *****

0dfb 20 d3 0d           JSR Setup_Filename
0dfe 20 7a 0d           JSR Load_File
              ;         JSR Verify_File
0e01 60                 RTS


0e02          EOP       ; END-OF-PROGRAM


  240 Symbols
-------------
C8296                          $0000    31D    33
HelpLines                      $0007   224D   260
PosDiskName                    $0008    98D   461    463    464    465
TAB                            $0009    17D   806
CR                             $000d    18
CDOWN                          $0011    22D   808
HOME                           $0013    19D   830
EntriesPerPage                 $0014    91D   975    979    981
DEL                            $0014    20
ROWS                           $0019    57D   955
PosDiskID                      $001a    99
CRIGHT                         $001d    23D   814
HelpLen                        $001e   223D   274
HOR_BAR                        $0040    47D  1002
VER_BAR                        $005d    48D  1026
BP                             $005e    63D   472    474    477y   480y
                                       484y   488y   497y   502y   515
                                       517    519y   528    530    532
                                       534    536    578    580    589y
                                       608    610    614    616    618
                                      1236   1241   1271y  1276   1280
                                      1290y  1292y  1301y  1319y  1322y
                                      1326y  1329
STP                            $0060    64D   273    276    473    475
                                       491    492y   501y  1088   1089
                                      1091y  1098
SP                             $0062    65D   305    306    308y   585
                                       587    596y   998   1001   1003y
                                      1023   1025   1027y  1051   1054
                                      1057y  1071   1074   1079y  1102y
                                      1117   1119   1121y  1134   1136
                                      1139
TP                             $0064    66D  1419   1422   1424
SelPtr                         $0066    67D   579    581   1417   1420
TL                             $006b    53D  1169
LL                             $006d    51D   258   1167
UR                             $006e    50D   257   1166
UL                             $0070    49D   256   1165
TR                             $0073    54D  1170
LR                             $007d    52D   259   1168
CUP                            $0091    24D   810
CLR                            $0093    21D   939   1179
STATUS                         $0096    73D  1267   1268   1272   1367
                                      1374   1383
STKEY                          $009b    74D   290
CLEFT                          $009d    25D   818
BLNSW                          $00a7    75
BLNCT                          $00a8    76
BLNON                          $00aa    77
EAL                            $00c9    78D  1371   1373   1376y  1377y
                                      1378y  1382   1385
FNLEN                          $00d1    79D  1408   1431
SA                             $00d3    80
FA                             $00d4    81D  1214   1250   1296
FNADR                          $00da    82D  1405y  1433   1435
DOS_Filename                   $0342    84D  1427   1432   1434
Link                           $0401   164
START                          $0401   157D   159    162    162
Linenumber                     $0403   167
SysCommand                     $0405   173
StartML                        $0406   177
LineEnd                        $0426   180
EndLink                        $0427   181D   164
NUMBER                         $042c   185D   363    377    391    398
                                       400    403    406    483
UnitText                       $0432   186D  1197   1197
DriveText                      $0438   187D  1198   1198
HelpText                       $043f   188D  1204   1204
ProgramText                    $044a   189D  1201   1201
Msg_READY                      $0475   190D   910    911
Cols                           $047c   191D   927    951
Count                          $047d   192D   241    249    261    279
                                      1005   1029   1147   1158
CursorRow                      $047e   193D   268    888   1038   1047
                                      1067
CursorCol                      $047f   194D   889   1039   1050   1058
                                      1070   1080   1103
Entries                        $0480   195D   504    513    524    624
                                       639    679    688    721    858
                                       872    890
FirstLine                      $0481   196D   623    677    681    709
                                       711    786    894
LastLine                       $0482   197D   566    620    674    678
                                       722    724    931
HelpScreen                     $0483   198D   282    799    853
Pages                          $0484   199D   929   1184
ScreenLo                       $0485   200D   946    950    965    996
                                      1022   1049   1069   1116   1133
ScreenHi                       $049e   201D   948    966    999   1024
                                      1052   1072   1118   1135
EntryLo                        $04b7   202D   574    584    968    975
EntryHi                        $04df   203D   576    586    971    979
Page                           $0507   204D  1185   1193
Offset                         $0508   205D   239    891    997   1020
                                      1114   1131   1187   1190   1192
                                      1196
Unit                           $0509   206D   425    745    748    765
                                       768    884   1213   1249   1295
Drive                          $050a   207D   447    752    755    772
                                       775    886   1256
LV0                            $050b   208D   355    364    369    378
                                       383    392
LV1                            $050c   209D   356    360    365    370
                                       374    379    384    388
Reverse                        $050d   210D   421    446    583    595
                                       892   1078   1101   1138   1200
                                      1203
Select                         $050e   211D   418    442    572    633
                                       642    651    657    670    691
                                       692    706    719    726    743
                                       763    785    861    893
FirstFile                      $050f   212
SOD                            $0510   213D   607    609    682    684
                                       686    713    715    717    788
                                       790   1239   1243
EOD                            $0512   214D   533    535   1237   1242
                                      1279   1281
TargetLo                       $0514   215
TargetHi                       $0515   216
SelectionLo                    $0516   217D   575
SelectionHi                    $0517   218D   577
SelFilename                    $0518   219
HelpWin                        $0519   225D   265    266
ShowHelp                       $05eb   235D   836
ShHe10                         $064a   267D   280
STOP                           $066c   288
Error_Beep                     $0671   295
PrintText                      $0676   302
PrTe_10                        $067c   308D   312
Flush_Keyboard_Queue           $0686   316D   320    909
FormatByte                     $068c   324D   426
asts_01                        $0691   333D   335
asts_rt                        $06a3   345D   338
FormatInteger                  $06a4   349D   481
FORINT_01                      $06a7   354D   362
FORINT_02                      $06c5   368D   376
FORINT_03                      $06e3   382D   390
FORINT_04                      $06fe   395D   397
FORINT_05                      $070f   403D   409
FORINT_06                      $071e   410D   405
ShowUnit                       $071f   414D   734    855    863
ShUn10                         $0728   421D   419
ShUn20                         $0742   433D   428
ShowDrive                      $074a   438D   735    856
ShDr10                         $0754   446D   444
ShowDiskName                   $0761   454D   857
FormatFilename                 $0779   469D   522
FoFi10                         $078e   483D   487
FoFi20                         $079e   491D   494    496
FoFi40                         $07ac   498D   503
FoFi50                         $07b1   501
FoFi99                         $07ba   505D   490    500
FormatEntries                  $07bb   509D   874
FoEn10                         $07c8   518D   537
FoEn20                         $07e8   533D   531
FoEn99                         $07f4   538D   521
PET2SCR                        $07f5   542D   594   1077   1093   1100
                                      1222
P2C10                          $0800   551D   548
P2C99                          $080a   556D   546    552    554
ShowEntry                      $080b   559D   526    612
ShEn10                         $0831   583D   573
ShEn20                         $0840   589D   599
ShEn30                         $084a   594D   592
ShEn99                         $0857   600D   567    590
ShowEntries                    $0858   604D   736    862
ShoE10                         $0864   612D   625
ShoE20                         $0872   619D   617
ShoE99                         $0881   626D   621
RightSelect                    $0882   630D   816
RiSe99                         $0898   643D   636    640
LeftSelect                     $0899   648D   820
LeSe99                         $08a9   658D   655
IncSelect                      $08aa   662D   634    842
InSe10                         $08d3   687D   685
InSe20                         $08d4   688D   675
InSe30                         $08d9   690D   680
InSe40                         $08de   692D   671    673    689
InSe99                         $08e1   693
DecSelect                      $08e2   698D   653    812
DeSe10                         $08ff   718D   716
DeSe20                         $0900   719D   708    710
DeSe30                         $0910   725D   723
DeSe99                         $0914   727D   720
ShowSelection                  $0915   731D   843
IncValue                       $091e   740D   824
InVa10                         $092f   750D   744
InVa20                         $093c   756D   749
InVa99                         $093f   757D   747    751    754
DecValue                       $0940   760D   828
DeVa10                         $0951   770D   764
DeVa20                         $095e   776D   769
DeVa99                         $0961   777D   767    771    774
HomeSelect                     $0962   781D   832
MainLoop                       $0975   794D   798    837    841    844
                                       908
MaLo02                         $0984   804D   800
MaLo05                         $0990   810
MaLo10                         $099a   814D   811
MaLo15                         $09a4   818D   815
MaLo20                         $09ae   822D   819
MaLo25                         $09b8   826D   823
MaLo30                         $09c2   830D   827
MaLo35                         $09cc   834D   831
MaLo40                         $09d6   838D   835
MaLo45                         $09dd   841D   839
MaLo85                         $09e0   842D   807    809
MaLo90                         $09e3   843D   813    817    821    825
                                       829    833
MaLo99                         $09e9   845D   805
Repaint                        $09ea   849D   802    875    904
Repa10                         $0a0b   864D   859
Reload                         $0a0c   868D   756    776    907
Init                           $0a1b   880D   906
Main                           $0a3d   898D   183
Detect_BASIC_version           $0a5f   917D   901
Detect_Screen_Width            $0a60   923D   902
SetupScreen                    $0a70   936D   903
SeSe10                         $0a80   946D   956
SeSe20                         $0a91   954D   952
SetupEntries                   $0a97   961D   905
SeEn10                         $0a99   965D   982
SeEn20                         $0ab3   978D   976
HorLine                        $0abd   987D   244    247   1150   1153
                                      1156
HoLi10                         $0acf  1003D  1006
VerLine                        $0ad8  1010D   252    255   1161   1164
VeLi10                         $0ade  1022D  1030
GotoXY                         $0af3  1035D   264    271    424    459
                                      1197   1198   1201   1204
PutChar                        $0afa  1043D   435
PutCharR                       $0b17  1063D   431    433   1094
PutString                      $0b3a  1085D   267    466   1197   1198
                                      1201   1204
PuSt10                         $0b4a  1095D  1104
PuSt99                         $0b60  1105D  1092   1097   1099
PlotAt                         $0b61  1108D   256    257    258    259
                                      1165   1166   1167   1168   1169
                                      1170
PlotAtR                        $0b76  1125D   450
PaintPage                      $0b8e  1143D  1188
PaintMask                      $0bf2  1174D   854
PaMa10                         $0c0f  1188D  1194
GetDiskStatus                  $0c68  1210D  1259   1309
gss_10                         $0c77  1219D  1226
gss_20                         $0c89  1227D  1221
LoadDirectory                  $0c8d  1232D   873
LoDi05                         $0ca6  1246D  1248
LoDi10                         $0ce1  1270D  1275   1277
LoDi20                         $0cf1  1278D  1273
LoDi99                         $0cfc  1282D  1262
GetLoadAddress                 $0cff  1285D   523
GLA10                          $0d1c  1301D  1307
GLA20                          $0d2a  1308D  1303
GLA99                          $0d5d  1331D  1294   1312
ASCII_Hex                      $0d60  1334D  1317   1324
Hex_11                         $0d6d  1348D  1346
Hex_12                         $0d79  1355D  1353
Load_File                      $0d7a  1358D  1444
LoFi_22                        $0d8d  1370D  1368
LoFi_30                        $0d98  1375D  1384
LoFi_40                        $0d9d  1377D  1379
LoFi_60                        $0da8  1383D  1381
Close_Disk_File                $0db1  1389D  1282   1331
Send_Filename                  $0dbc  1398D  1361
SeFi_10                        $0dc6  1405D  1409
SeFi_20                        $0dd0  1410
Setup_Filename                 $0dd3  1413D  1443
SpFi_10                        $0de2  1424D  1430
SpFi_20                        $0df0  1431D  1426
Flash                          $0dfb  1440D   840
EOP                            $0e02  1449D    97    162
Buffer                         $0f00    97D   461    463    464    465
                                       516    789   1235   1240   1246
Screen                         $8000    90D   943    944
DiskStatus                     $80c9   221D  1223   1260   1310
READY                          $b403   105D   912
TALK                           $f0d2   106D  1215   1263   1313   1362
LISTEN                         $f0d5   107D  1251   1297   1392   1401
SECOND                         $f143   108D  1253   1299   1394   1403
TKSA                           $f193   109D  1217   1265   1315   1364
CIOUT                          $f19e   110D  1255   1257   1304   1406
UNTLK                          $f1ae   111D  1227   1278   1330   1386
UNLSN                          $f1b9   112D  1258   1308   1395   1410
ACPTR                          $f1c0   113D  1219   1270   1316   1323
                                      1365   1370   1375
Kernal_STOP                    $f343   118
CHROUT                         $ffd2   115D   940    942
BSOUT                          $ffd2   114D   299    309   1178   1180
                                      1181
GETIN                          $ffe4   116D   319    797
BP                             $005e    63D   472    474    477y   480y
                                       484y   488y   497y   502y   515
                                       517    519y   528    530    532
                                       534    536    578    580    589y
                                       608    610    614    616    618
                                      1236   1241   1271y  1276   1280
                                      1290y  1292y  1301y  1319y  1322y
                                      1326y  1329
SP                             $0062    65D   305    306    308y   585
                                       587    596y   998   1001   1003y
                                      1023   1025   1027y  1051   1054
                                      1057y  1071   1074   1079y  1102y
                                      1117   1119   1121y  1134   1136
                                      1139
STP                            $0060    64D   273    276    473    475
                                       491    492y   501y  1088   1089
                                      1091y  1098
EAL                            $00c9    78D  1371   1373   1376y  1377y
                                      1378y  1382   1385
STATUS                         $0096    73D  1267   1268   1272   1367
                                      1374   1383
SelPtr                         $0066    67D   579    581   1417   1420
PosDiskName                    $0008    98D   461    463    464    465
FNADR                          $00da    82D  1405y  1433   1435
FA                             $00d4    81D  1214   1250   1296
TP                             $0064    66D  1419   1422   1424
EntriesPerPage                 $0014    91D   975    979    981
FNLEN                          $00d1    79D  1408   1431
CLR                            $0093    21D   939   1179
LR                             $007d    52D   259   1168
UL                             $0070    49D   256   1165
UR                             $006e    50D   257   1166
LL                             $006d    51D   258   1167
CLEFT                          $009d    25D   818
STKEY                          $009b    74D   290
CUP                            $0091    24D   810
TR                             $0073    54D  1170
TL                             $006b    53D  1169
VER_BAR                        $005d    48D  1026
HOR_BAR                        $0040    47D  1002
HelpLen                        $001e   223D   274
CRIGHT                         $001d    23D   814
ROWS                           $0019    57D   955
HOME                           $0013    19D   830
CDOWN                          $0011    22D   808
TAB                            $0009    17D   806
HelpLines                      $0007   224D   260
C8296                          $0000    31D    33
SA                             $00d3    80
BLNON                          $00aa    77
BLNCT                          $00a8    76
BLNSW                          $00a7    75
PosDiskID                      $001a    99
DEL                            $0014    20
CR                             $000d    18
BP                             $005e    63D   472    474    477y   480y
                                       484y   488y   497y   502y   515
                                       517    519y   528    530    532
                                       534    536    578    580    589y
                                       608    610    614    616    618
                                      1236   1241   1271y  1276   1280
                                      1290y  1292y  1301y  1319y  1322y
                                      1326y  1329
SP                             $0062    65D   305    306    308y   585
                                       587    596y   998   1001   1003y
                                      1023   1025   1027y  1051   1054
                                      1057y  1071   1074   1079y  1102y
                                      1117   1119   1121y  1134   1136
                                      1139
Select                         $050e   211D   418    442    572    633
                                       642    651    657    670    691
                                       692    706    719    726    743
                                       763    785    861    893
SOD                            $0510   213D   607    609    682    684
                                       686    713    715    717    788
                                       790   1239   1243
Entries                        $0480   195D   504    513    524    624
                                       639    679    688    721    858
                                       872    890
STP                            $0060    64D   273    276    473    475
                                       491    492y   501y  1088   1089
                                      1091y  1098
PlotAt                         $0b61  1108D   256    257    258    259
                                      1165   1166   1167   1168   1169
                                      1170
Reverse                        $050d   210D   421    446    583    595
                                       892   1078   1101   1138   1200
                                      1203
Offset                         $0508   205D   239    891    997   1020
                                      1114   1131   1187   1190   1192
                                      1196
Buffer                         $0f00    97D   461    463    464    465
                                       516    789   1235   1240   1246
Unit                           $0509   206D   425    745    748    765
                                       768    884   1213   1249   1295
ScreenLo                       $0485   200D   946    950    965    996
                                      1022   1049   1069   1116   1133
GotoXY                         $0af3  1035D   264    271    424    459
                                      1197   1198   1201   1204
LV1                            $050c   209D   356    360    365    370
                                       374    379    384    388
ScreenHi                       $049e   201D   948    966    999   1024
                                      1052   1072   1118   1135
Count                          $047d   192D   241    249    261    279
                                      1005   1029   1147   1158
NUMBER                         $042c   185D   363    377    391    398
                                       400    403    406    483
Drive                          $050a   207D   447    752    755    772
                                       775    886   1256
LastLine                       $0482   197D   566    620    674    678
                                       722    724    931
FirstLine                      $0481   196D   623    677    681    709
                                       711    786    894
CursorCol                      $047f   194D   889   1039   1050   1058
                                      1070   1080   1103
EAL                            $00c9    78D  1371   1373   1376y  1377y
                                      1378y  1382   1385
PutString                      $0b3a  1085D   267    466   1197   1198
                                      1201   1204
MaLo90                         $09e3   843D   813    817    821    825
                                       829    833
EOD                            $0512   214D   533    535   1237   1242
                                      1279   1281
LV0                            $050b   208D   355    364    369    378
                                       383    392
STATUS                         $0096    73D  1267   1268   1272   1367
                                      1374   1383
HorLine                        $0abd   987D   244    247   1150   1153
                                      1156
MainLoop                       $0975   794D   798    837    841    844
                                       908
PET2SCR                        $07f5   542D   594   1077   1093   1100
                                      1222
CursorRow                      $047e   193D   268    888   1038   1047
                                      1067
VerLine                        $0ad8  1010D   252    255   1161   1164
EntryHi                        $04df   203D   576    586    971    979
EntryLo                        $04b7   202D   574    584    968    975
SelPtr                         $0066    67D   579    581   1417   1420
PosDiskName                    $0008    98D   461    463    464    465
PuSt99                         $0b60  1105D  1092   1097   1099
PutCharR                       $0b17  1063D   431    433   1094
Reload                         $0a0c   868D   756    776    907
Repaint                        $09ea   849D   802    875    904
DeVa99                         $0961   777D   767    771    774
InVa99                         $093f   757D   747    751    754
InSe40                         $08de   692D   671    673    689
P2C99                          $080a   556D   546    552    554
ShowUnit                       $071f   414D   734    855    863
HelpScreen                     $0483   198D   282    799    853
START                          $0401   157D   159    162    162
DOS_Filename                   $0342    84D  1427   1432   1434
FNADR                          $00da    82D  1405y  1433   1435
FA                             $00d4    81D  1214   1250   1296
TP                             $0064    66D  1419   1422   1424
EntriesPerPage                 $0014    91D   975    979    981
EOP                            $0e02  1449D    97    162
Close_Disk_File                $0db1  1389D  1282   1331
ASCII_Hex                      $0d60  1334D  1317   1324
GLA99                          $0d5d  1331D  1294   1312
LoDi10                         $0ce1  1270D  1275   1277
GetDiskStatus                  $0c68  1210D  1259   1309
MaLo85                         $09e0   842D   807    809
DeSe20                         $0900   719D   708    710
DecSelect                      $08e2   698D   653    812
IncSelect                      $08aa   662D   634    842
RiSe99                         $0898   643D   636    640
ShowEntries                    $0858   604D   736    862
ShEn99                         $0857   600D   567    590
ShowEntry                      $080b   559D   526    612
FoFi99                         $07ba   505D   490    500
FoFi20                         $079e   491D   494    496
ShowDrive                      $074a   438D   735    856
Flush_Keyboard_Queue           $0686   316D   320    909
HelpWin                        $0519   225D   265    266
Page                           $0507   204D  1185   1193
Pages                          $0484   199D   929   1184
Cols                           $047c   191D   927    951
Msg_READY                      $0475   190D   910    911
ProgramText                    $044a   189D  1201   1201
HelpText                       $043f   188D  1204   1204
DriveText                      $0438   187D  1198   1198
UnitText                       $0432   186D  1197   1197
FNLEN                          $00d1    79D  1408   1431
CLR                            $0093    21D   939   1179
LR                             $007d    52D   259   1168
UL                             $0070    49D   256   1165
UR                             $006e    50D   257   1166
LL                             $006d    51D   258   1167
Flash                          $0dfb  1440D   840
SpFi_20                        $0df0  1431D  1426
SpFi_10                        $0de2  1424D  1430
Setup_Filename                 $0dd3  1413D  1443
SeFi_10                        $0dc6  1405D  1409
Send_Filename                  $0dbc  1398D  1361
LoFi_60                        $0da8  1383D  1381
LoFi_40                        $0d9d  1377D  1379
LoFi_30                        $0d98  1375D  1384
LoFi_22                        $0d8d  1370D  1368
Load_File                      $0d7a  1358D  1444
Hex_12                         $0d79  1355D  1353
Hex_11                         $0d6d  1348D  1346
GLA20                          $0d2a  1308D  1303
GLA10                          $0d1c  1301D  1307
GetLoadAddress                 $0cff  1285D   523
LoDi99                         $0cfc  1282D  1262
LoDi20                         $0cf1  1278D  1273
LoDi05                         $0ca6  1246D  1248
LoadDirectory                  $0c8d  1232D   873
gss_20                         $0c89  1227D  1221
gss_10                         $0c77  1219D  1226
PaMa10                         $0c0f  1188D  1194
PaintMask                      $0bf2  1174D   854
PaintPage                      $0b8e  1143D  1188
PlotAtR                        $0b76  1125D   450
PuSt10                         $0b4a  1095D  1104
PutChar                        $0afa  1043D   435
VeLi10                         $0ade  1022D  1030
HoLi10                         $0acf  1003D  1006
SeEn20                         $0ab3   978D   976
SeEn10                         $0a99   965D   982
SetupEntries                   $0a97   961D   905
SeSe20                         $0a91   954D   952
SeSe10                         $0a80   946D   956
SetupScreen                    $0a70   936D   903
Detect_Screen_Width            $0a60   923D   902
Detect_BASIC_version           $0a5f   917D   901
Main                           $0a3d   898D   183
Init                           $0a1b   880D   906
Repa10                         $0a0b   864D   859
MaLo99                         $09e9   845D   805
MaLo45                         $09dd   841D   839
MaLo40                         $09d6   838D   835
MaLo35                         $09cc   834D   831
MaLo30                         $09c2   830D   827
MaLo25                         $09b8   826D   823
MaLo20                         $09ae   822D   819
MaLo15                         $09a4   818D   815
MaLo10                         $099a   814D   811
MaLo02                         $0984   804D   800
HomeSelect                     $0962   781D   832
DeVa20                         $095e   776D   769
DeVa10                         $0951   770D   764
DecValue                       $0940   760D   828
InVa20                         $093c   756D   749
InVa10                         $092f   750D   744
IncValue                       $091e   740D   824
ShowSelection                  $0915   731D   843
DeSe99                         $0914   727D   720
DeSe30                         $0910   725D   723
DeSe10                         $08ff   718D   716
InSe30                         $08d9   690D   680
InSe20                         $08d4   688D   675
InSe10                         $08d3   687D   685
LeSe99                         $08a9   658D   655
LeftSelect                     $0899   648D   820
RightSelect                    $0882   630D   816
ShoE99                         $0881   626D   621
ShoE20                         $0872   619D   617
ShoE10                         $0864   612D   625
ShEn30                         $084a   594D   592
ShEn20                         $0840   589D   599
ShEn10                         $0831   583D   573
P2C10                          $0800   551D   548
FoEn99                         $07f4   538D   521
FoEn20                         $07e8   533D   531
FoEn10                         $07c8   518D   537
FormatEntries                  $07bb   509D   874
FoFi40                         $07ac   498D   503
FoFi10                         $078e   483D   487
FormatFilename                 $0779   469D   522
ShowDiskName                   $0761   454D   857
ShDr10                         $0754   446D   444
ShUn20                         $0742   433D   428
ShUn10                         $0728   421D   419
FORINT_06                      $071e   410D   405
FORINT_05                      $070f   403D   409
FORINT_04                      $06fe   395D   397
FORINT_03                      $06e3   382D   390
FORINT_02                      $06c5   368D   376
FORINT_01                      $06a7   354D   362
FormatInteger                  $06a4   349D   481
asts_rt                        $06a3   345D   338
asts_01                        $0691   333D   335
FormatByte                     $068c   324D   426
PrTe_10                        $067c   308D   312
ShHe10                         $064a   267D   280
ShowHelp                       $05eb   235D   836
SelectionHi                    $0517   218D   577
SelectionLo                    $0516   217D   575
EndLink                        $0427   181D   164
CLEFT                          $009d    25D   818
STKEY                          $009b    74D   290
CUP                            $0091    24D   810
TR                             $0073    54D  1170
TL                             $006b    53D  1169
VER_BAR                        $005d    48D  1026
HOR_BAR                        $0040    47D  1002
HelpLen                        $001e   223D   274
CRIGHT                         $001d    23D   814
ROWS                           $0019    57D   955
HOME                           $0013    19D   830
CDOWN                          $0011    22D   808
TAB                            $0009    17D   806
HelpLines                      $0007   224D   260
C8296                          $0000    31D    33
SeFi_20                        $0dd0  1410
MaLo05                         $0990   810
InSe99                         $08e1   693
FoFi50                         $07b1   501
PrintText                      $0676   302
Error_Beep                     $0671   295
STOP                           $066c   288
SelFilename                    $0518   219
TargetHi                       $0515   216
TargetLo                       $0514   215
FirstFile                      $050f   212
LineEnd                        $0426   180
StartML                        $0406   177
SysCommand                     $0405   173
Linenumber                     $0403   167
Link                           $0401   164
SA                             $00d3    80
BLNON                          $00aa    77
BLNCT                          $00a8    76
BLNSW                          $00a7    75
PosDiskID                      $001a    99
DEL                            $0014    20
CR                             $000d    18
